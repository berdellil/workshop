(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([[648],{2138:function(e,t,n){"use strict";n.r(t);n.d(t,"resourceKey",function(){return o});var r=n(3607),i=n(3608),s=n(1793),o=Object(s.n)({name:"CommandBar",template:r.e,automationName:"ms-command-bar-wrapper",viewModelType:i.e});t.default=o},3607:function(e,t,n){"use strict";t.e='<div data-bind="element:rootElement,keyboard:keyboardOptions,react:reactBindingParams"></div>'},3608:function(e,t,n){"use strict";var r=n(0),i=n(1789),s=n(1811),o=n(1846),u=n(1812),a=n(1808),f=n(1832),l=n(3279),c=n(70),h=n(67),p=n(77),d=Object(c.e)(function(){return Object(r.__awaiter)(void 0,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return[4,n.ee(56,3437)];case 1:return[2,e.sent().ReactCommandBar]}})})}),v=(function(e){Object(r.__extends)(t,e);function t(t,n){var r=e.call(this,t,n)||this;r._responsiveUI=n.responsiveUI;r.addBindingHandlers({react:f.t,element:u.e,keyboard:a.e,interactionScope:o.t});var i=r.observables.create(!0);r._reactCommandManager=r.scope.attach(new n.reactCommandManagerType({commandSet:t.commandSet,isActive:i}));r.rootElement=r.createObservable();r.shouldBlockEscKey=r.createObservable(!1);r.keyboardOptions={target:Object(p.isFeatureEnabled)(p.shouldTargetWindow)?window:document,isActive:i,mappings:{},allowButtonEvents:!0,eventFilter:r._getEventFilter()};r._initializeKeyboardMappings();var s=r._getCommandBarProps();r.reactBindingParams={componentType:d,props:s};return r}t.prototype._getCommandBarProps=function(){var e=this;return this.observables.pureCompute(function(){var t,n=e._reactCommandManager.commandBarItems(),i=n.items,s=n.farItems,o=i,u=n.overflowItems;if(o.length){var a=o[0];if("Small"===e._responsiveUI.formFactorSize()){u=Object(r.__spreadArrays)(o.slice(1),u);o=[a]}else o=Object(r.__spreadArrays)([a],o.slice(1))}u=u.map(function(e){return Object(r.__assign)(Object(r.__assign)({},e),{renderedInOverflow:!0})});if(h.t.isActivated("264FA7B2-B9C5-11EB-8529-0242AC130003","5/20/2021","Suppress command callouts from inactive modals")||e.observables.unwrap(e.keyboardOptions.isActive))for(var f=0,l=u;f<l.length;f++){var c=l[f].data,p=c.payload;if(p&&p.control()&&c.isOpen()&&(!c.action||!c.action.isToggled())){t=c;break}}return{mainCommands:o,farCommands:s,overFlowCommands:u,payloadCommand:t,isActive:e.observables.unwrap(e.keyboardOptions.isActive),shouldBlockEscKey:e.shouldBlockEscKey}}).extend({deferred:!0})};t.prototype._initializeKeyboardMappings=function(){var e=this,t=this._reactCommandManager.allCommands,n=function(t){var n={};(function e(t,n){for(var r=function(n){if(n.keys)for(var r=function(e,t){n.onClick(n,t);t.preventDefault()},i=0,s=n.keys;i<s.length;i++){var o=s[i];t[o]||(t[o]=[]);t[o].push(r)}var u=n.children.peek();u.length&&e(t,u)},i=0,s=n;i<s.length;i++){var o=s[i];r(o)}})(n,t);e.keyboardOptions.mappings=n};n(t.peek());this.observables.subscribe(t,n)};t.prototype._getEventFilter=function(){var e=this;return function(t,n,r){var i;if("Left"===t||"Right"===t){var s=e.rootElement.peek();if(r&&s.contains(r.target))return!1}if(!Object(p.isFeatureEnabled)(p.shouldTargetWindow)&&!h.t.isActivated("b1e3b1a3-c4e6-4d4f-a40d-d456de338f8d","07/05/2021","fixing the escape key problem when commandbar is overflown")&&"Esc"===t&&e.shouldBlockEscKey.peek()){e.shouldBlockEscKey(!1);return!1}for(var o=0,u=Array.from(document.querySelectorAll("[data-handle-special-keys]"));o<u.length;o++){var a=u[o];if(-1!==((null===(i=a.getAttribute("data-handle-special-keys"))||void 0===i?void 0:i.split(" "))||[]).indexOf(t)&&r&&a.contains(r.target))return!1}return!0}};t.dependencies=Object(r.__assign)(Object(r.__assign)({},i.t.dependencies),{responsiveUI:s.t,reactCommandManagerType:l.typeResourceKey});return t})(i.t);t.e=v}}]);